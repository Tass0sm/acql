<!-- Credit: adapted from Mujoco Menagerie -->
<mujoco model="ur5e">
  <compiler angle="radian" meshdir="universal_robots_ur5e/assets" autolimits="true"/>

  <option integrator="implicitfast"/>

  <default>
    <default class="ur5e">
      <material specular="0.5" shininess="0.25"/>
      <joint axis="0 1 0" range="-6.28319 6.28319" armature="0.1"/>
      <general gaintype="fixed" biastype="affine" ctrlrange="-6.2831 6.2831" gainprm="2000" biasprm="0 -2000 -400"
        forcerange="-150 150"/>
      <default class="size3">
        <default class="size3_limited">
          <joint range="-3.1415 3.1415"/>
          <general ctrlrange="-3.1415 3.1415"/>
        </default>
      </default>
      <default class="size1">
        <general gainprm="500" biasprm="0 -500 -100" forcerange="-28 28"/>
      </default>
      <default class="visual">
        <geom type="mesh" contype="0" conaffinity="0" group="2"/>
      </default>
      <default class="collision">
        <geom type="capsule" group="3"/>
        <default class="eef_collision">
          <geom type="cylinder"/>
        </default>
      </default>
      <site size="0.001" rgba="0.5 0.5 0.5 0.3" group="4"/>
    </default>
  </default>

  <asset>
    <texture builtin="checker" height="100" name="texplane" rgb1="0 0 0" rgb2="0.8 0.8 0.8" type="2d" width="100"/>
    <material name="MatPlane" reflectance="0.5" shininess="1" specular="1" texrepeat="60 60" texture="texplane"/>

    <material class="ur5e" name="black" rgba="0.033 0.033 0.033 1"/>
    <material class="ur5e" name="jointgray" rgba="0.278 0.278 0.278 1"/>
    <material class="ur5e" name="linkgray" rgba="0.82 0.82 0.82 1"/>
    <material class="ur5e" name="urblue" rgba="0.49 0.678 0.8 1"/>

    <mesh file="base_0.obj"/>
    <mesh file="base_1.obj"/>
    <mesh file="shoulder_0.obj"/>
    <mesh file="shoulder_1.obj"/>
    <mesh file="shoulder_2.obj"/>
    <mesh file="upperarm_0.obj"/>
    <mesh file="upperarm_1.obj"/>
    <mesh file="upperarm_2.obj"/>
    <mesh file="upperarm_3.obj"/>
    <mesh file="forearm_0.obj"/>
    <mesh file="forearm_1.obj"/>
    <mesh file="forearm_2.obj"/>
    <mesh file="forearm_3.obj"/>
    <mesh file="wrist1_0.obj"/>
    <mesh file="wrist1_1.obj"/>
    <mesh file="wrist1_2.obj"/>
    <mesh file="wrist2_0.obj"/>
    <mesh file="wrist2_1.obj"/>
    <mesh file="wrist2_2.obj"/>
    <mesh file="wrist3.obj"/>
  </asset>

  <worldbody>
    <!-- <light name="spotlight" mode="targetbodycom" target="wrist_2_link" pos="0 -1 2"/> -->
    <geom conaffinity="1" condim="3" material="MatPlane" name="floor" pos="0 0 -0.6" size="100 100 40" type="plane"/>
    <camera name="overview" pos="0.5 0.15 0.5" xyaxes="1 0.5 0 0 0 1" fovy="120"/>

    <!-- based on the tessco 36 inch wide, 24 inch deep, 72 inch tall storage cabinet -->
    <!-- that's 0.9144 x 0.6096 x 1.8288 meters -->
    <!-- half-dimensions are 0.4572 x 0.3048 x 0.9144 meters -->
    <!-- the shelf's origin is at the floor, in the center of the negative space. -->
    <!-- the shelf's entrance is at y = 0.7 - 0.3048 = ~0.4 -->
    <!-- the shelf's table is at z = -0.6 + 0.9144 = 0.3 -->
    <body name="shelf" pos="0.0 0.7 -0.6">
      <geom name="table"  pos="0.0000  0.0000 0.9144" size="0.4572 0.3048 0.0300" type="box" rgba="0.5 0.5 0.5 1" contype="0" conaffinity="0"/>
      <geom name="bottom" pos="0.0000  0.0000 0.0300" size="0.4572 0.3048 0.0300" type="box" rgba="0.5 0.5 0.5 1" contype="0" conaffinity="0"/>
      <geom name="top"    pos="0.0000  0.0000 1.8288" size="0.4572 0.3048 0.0300" type="box" rgba="0.5 0.5 0.5 1" contype="0" conaffinity="0"/>
      <geom name="bar1"   pos="-0.4572 0.0000 0.9144" size="0.0150 0.3048 0.9144" type="box" rgba="0.5 0.5 0.5 1" contype="0" conaffinity="0"/>
      <geom name="first_third_wall"   pos="-0.1524 0.0000 0.9144" size="0.0150 0.3048 0.9144" type="box" rgba="0.5 0.5 0.5 1" contype="0" conaffinity="0"/>
      <!-- <geom name="center_wall"        pos="0.0000  0.0000 0.9144" size="0.0150 0.3048 0.9144" type="box" rgba="0.5 0.5 0.5 1" contype="0" conaffinity="0"/> -->
      <geom name="first_second_wall"  pos="0.1524  0.0000 0.9144" size="0.0150 0.3048 0.9144" type="box" rgba="0.5 0.5 0.5 1" contype="0" conaffinity="0"/>
      <geom name="bar3"   pos="0.4572  0.0000 0.9144" size="0.0150 0.3048 0.9144" type="box" rgba="0.5 0.5 0.5 1" contype="0" conaffinity="0"/>
      <geom name="back"   pos="0.0000  0.3048 0.9144" size="0.4572 0.0300 0.9144" type="box" rgba="0.5 0.5 0.5 1" contype="0" conaffinity="0"/>
    </body>

    <body name="goal_marker" pos="-0.3 0.6 0.4" gravcomp="1">
      <freejoint/>
      <geom name="goal_marker_geom" size="0.1" type="sphere" rgba="0.3 1 0.3 1" contype="0" conaffinity="0"/>
    </body>

    <body name="tablelink" pos="0 .2 0">
        <geom name="table_geom" group="4" pos="0.0 0.0 0.0" size="2.8 2.4 0.1" type="plane" mass="10" friction="0.2 0.005 0.0001" contype="0" conaffinity="0"/>
    </body>

    <body name="hand" pos="0 0 0" quat="0 -1 1 0" gravcomp="1"> <!-- Need to rotate by 180 degrees on y-axis, then 90 degrees z-axis -->
      <joint name="hand_x" type="slide" pos="0 0 0" axis="0 -1 0" range="-0.4 0.4"/> <!-- Choose axes relative to hand so joint lengths correspond to the world position -->
      <joint name="hand_y" type="slide" pos="0 0 0" axis="-1 0 0" range="0.25 0.85"/>
      <joint name="hand_z" type="slide" pos="0 0 0" axis="0 0 -1" range="-0.5 0.5"/>
      <geom name="hand_geom" rgba="1 1 1 1" type="sphere" size="0.04" pos="0 0 0" quat="1 1 0 0" contype="0" conaffinity="0"/>
    </body>
  </worldbody>

  <!-- <contact> -->
  <!--   <pair geom1="table_geom" geom2="hand_geom"/> -->
  <!-- </contact> -->

  <actuator>
    <general class="ur5e" name="actuator_hand_x" joint="hand_x" gainprm="1000" biasprm="0 -1000 -100"/>
    <general class="ur5e" name="actuator_hand_y" joint="hand_y" gainprm="1000" biasprm="0 -1000 -100"/>
    <general class="ur5e" name="actuator_hand_z" joint="hand_z" gainprm="1000" biasprm="0 -1000 -100"/>
  </actuator>
</mujoco>
